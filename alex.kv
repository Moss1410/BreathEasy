######### Kivy Custom Class Definitions: #########

# Define  background color Template
<Label@Widget>
    color: 0,0,0,1    # Sets the default text color to black

# Define  background color Template
<BackgroundColor@Widget>
    background_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgba: root.background_color
        RoundedRectangle:
            radius: [20,]
            size: self.size
            pos: self.pos

# BackgroundLabel Class
<BackgroundLabel@Label+BackgroundColor>
    background_color: 0, 0, 0, 1    # Default background color

# BackgroundLabel Class
<LightBlueBackgroundLabel@Label+BackgroundColor>
    background_color: 0.82, 0.9, 0.94, 1    # Default background color

### Title Area ###
# Title logic box
<TopPanelLogic@Logic>
    size_hint: 1, 0.05
# BackgroundLabel Class
<TitleLabel@Label+BackgroundColor>
    background_color: 0.82, 0.9, 0.94, 1    # Default background color
    font_size: '20sp'   # set the font size to BIG

# BackgroundLogic Class
<LightBlueBackgroundLogic@Logic+BackgroundColor>
    background_color: 0.82, 0.9, 0.94, 1    # Default background color

### Output Buttons Area ###
<OutputLogic@Logic>
    spacing: 15
    size_hint: 0.2, 1
    orientation: "vertical"

### Whole Page Enclosing Area ###
<BaseLogic@Logic>
    spacing: 20
    orientation: 'vertical'
    padding: 25, 25, 25, 25

### Mid panel area (graph and output labels) ###
<MidPanelLogic@Logic>
    spacing: 20
    size_hint: 1, 0.8

### Bottom Panel Area ###
<BottomPanelLogic@Logic>
    spacing: 20
    size_hint: 1, 0.15

<InputLogic@LightBlueBackgroundLogic>
    orientation: 'vertical'
    size_hint: 0.125, 1

<InputLabel@LightBlueBackgroundLabel>
    text_size: root.width, None
    halign: 'center'
    valign: 'center'


### Graphs Area ###
<GraphGroupLogic@Logic>
    spacing: 20
    orientation: 'vertical'
    size_hint: 0.8, 1

<GraphLogic@LightBlueBackgroundLogic>
    size_hint: [1, .9]

<Grapher@Widget>
    xlabel: ""
    x_ticks_minor: 5
    x_ticks_major: 25
    y_ticks_major: 200
    y_grid_label: True
    x_grid_label: True
    padding: 2
    x_grid: True 
    y_grid: True
    label_options: {'color': (0,0,0,1)}
    border_color: (0,0,0,1)

### Alarms Area ###
<AlarmGroupLogic@Logic>
    spacing: 15

<AlarmLabel@LightBlueBackgroundLabel>
    text_size: root.width, None
    halign: 'center'
    valign: 'center'

######### UI Layout: #########
BaseLogic:
    id: root_box
    
    # TITLE PANEL
    TopPanelLogic:
        TitleLabel:
            text: 'BreathEasy Ventilator Control Panel'
    # Button:
    #     text: 'Switch screens'
    #     on_press: root.manager.current = 'menu'

    # GRAPHS & OUTPUTS PANEL
    MidPanelLogic:
        # Triple Graph Group
        GraphGroupLogic:
            id: graph_group
            ######################################
            Logic:
<<<<<<< HEAD
                BoxLayout:
                    canvas:
                        Color:
                            rgba: 0.85, 0.85, 0.85, 1
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    orientation: "vertical"
                    BoxLayout:
                        size_hint: [1, .9]
                        Grapher:
                            xlabel: ""
                            ylabel: "Oxygen"
                            x_ticks_major: 100
                            y_ticks_major: 200
                            y_grid_label: True
                            x_grid_label: True
                            padding: 2
                            x_grid: True 
                            y_grid: True
=======
                # Setting the background color
                orientation: "vertical"
                GraphLogic:
                    Grapher:
                        id: "graph1"
                        ylabel: "Oxygen"
>>>>>>> 3e3cbf133d8aa7c4fd2d89ee2404cc311171e0c0
            ######################################

            ######################################
            Logic:
                LightBlueBackgroundLogic:
                    orientation: "vertical"
                    Logic:
                        size_hint: [1, .9]
                        Grapher:
<<<<<<< HEAD
                            xlabel: ""
                            ylabel: "Oxygen"
                            x_ticks_major: 100
                            y_ticks_major: 200
                            y_grid_label: True
                            x_grid_label: True
                            padding: 2
                            x_grid: True 
                            y_grid: True
=======
                            id: "graph1"
                            ylabel: "Oxygen"
>>>>>>> 3e3cbf133d8aa7c4fd2d89ee2404cc311171e0c0
            ######################################

            ######################################
            Logic:
                LightBlueBackgroundLogic:
                    orientation: "vertical"
                    Logic:
                        size_hint: [1, .9]
                        Grapher:
<<<<<<< HEAD
                            xlabel: ""
                            ylabel: "Oxygen"
                            x_ticks_major: 100
                            y_ticks_major: 200
                            y_grid_label: True
                            x_grid_label: True
                            padding: 2
                            x_grid: True 
                            y_grid: True

=======
                            id: "graph1"
                            ylabel: "Oxygen"
>>>>>>> 3e3cbf133d8aa7c4fd2d89ee2404cc311171e0c0
            ######################################

        # Output Parameters
        OutputLogic:
            id: outputs_panel

            # Parameter 1
            LightBlueBackgroundLogic:
                orientation: 'vertical'
                Label:
                    text_size: outputs_panel.width, None
                    halign: 'left'
                    valign: 'center'
                    text: 'Breath Frequency (b/min):'
                Label:
                    id: output_1
                    text: '6.5'
            # Parameter 2
            LightBlueBackgroundLogic:
                orientation: 'vertical'
                Label:
                    text_size: outputs_panel.width, None
                    halign: 'left'
                    valign: 'center'
                    text: 'Inspiratory Pressure (cmH2O):'
                    
                Label:
                    id: output_2
                    text: '164.35'
                    
            # Parameter 3
            LightBlueBackgroundLogic:
                orientation: 'vertical'
                Label:
                    text_size: outputs_panel.width, None
                    halign: 'left'
                    valign: 'center'
                    text: 'Inspiratory Time (s):'
                    
                Label:
                    id: output_3
                    text: '3'
                    
            # Parameter 4
            LightBlueBackgroundLogic:
                orientation: 'vertical'
                Label:
                    text_size: outputs_panel.width, None
                    halign: 'left'
                    valign: 'center'
                    text: 'PEEP (cmH2O):'
                    
                Label:
                    id: output_4
                    text: '12.71'

            # Logic:
            #     Button:
            #         text: 'Goto settings'
            #         on_press: root.manager.current = 'settings'
            #     Button:
            #         text: 'Quit'
                    

    # Input Parameters
    BottomPanelLogic:
        id: inputs_panel

        # Parameter 1
        InputLogic:
            InputLabel:
                text: 'Breath Frequency (b/min):'
                
            Label:
                text: str(int(input_1.value))
                
            ProgressBar:
                id: input_1
                min: 0
                max: 10
                value: 1


        # Parameter 2
        InputLogic:
            InputLabel:
                text: 'Inspiratory Pressure (cmH2O):'
                
            Label:
                text: str(int(input_2.value))
                
            ProgressBar:
                id: input_2
                min: 0
                max: 10
                value: 5

        # Parameter 3
        InputLogic:
            InputLabel:
                text: 'Inspiratory Time (s):'
                
            Label:
                text: str(int(input_3.value))
                
            ProgressBar:
                id: input_3
                min: 0
                max: 10
                value: 7

        # Parameter 4
        InputLogic:
            InputLabel:
                text: 'PEEP (cmH2O):'
                
            Label:
                text: str(int(input_4.value))
                
            ProgressBar:
                id: input_4
                min: 0
                max: 10
                value: 3

        # Parameter 5
        InputLogic:
            InputLabel:
                text: 'Pause Time (%/s):'
                
            Label:
                text: str(int(input_5.value))
                
            ProgressBar:
                id: input_5
                min: 0
                max: 10
                value: 2

        # Parameter 6
        InputLogic:
            InputLabel:
                text: 'Inspiratory Time (s):'
                
            Label:
                text: str(int(input_6.value))
                
            ProgressBar:
                id: input_6
                min: 0
                max: 10
                value: 8

        ################################
        # Alarms Panel
        AlarmGroupLogic:
            spacing: 15
            orientation: 'vertical'
            size_hint: 0.25, 1
            AlarmGroupLogic:
                AlarmLabel:
                    text: 'Alarm 1'
                AlarmLabel:
                    text: 'Alarm 2'
                        
            AlarmGroupLogic:
                AlarmLabel:
                    text: 'Alarm 3'
                AlarmLabel:
                    text: 'Alarm 4'
        ################################



######### UI Element Snippets: #########

## RESET BUTTON PANEL
#Logic:
#    size_hint_y: None
#    size_hint: 1, 0.05
#    Button:
#        text: 'Reset Configuration'
#        on_press: input_1.value = 0; input_2.value = 0; input_3.value = 1; input_4.value = 1; input_5.value = 0; input_6.value = 0


## A template slider element
#Logic:
#    orientation: 'vertical'
#    Slider:
#        id: parameter_2
#        min: -360.
#        max: 360.
#        value: 360
#    Label:
#        text: 'Inspiratory Pressure (cmH2O) = {}'.format(parameter_2.value)


## Template buttons
#Logic:
#    orientation: 'vertical'
#    Logic:
#        id: parameter_1
#        min: 10
#        max: 0
#        Button:
#            text: 'Reset Configuration'
#            on_press: parameter_1 = parameter_1 - 1
#        Button:
#            text: 'Reset Configuration'
#            on_press: parameter_1 = parameter_1 + 1
#        Label:
#            text: 'Breath Frequency (b/min) = {}'.format(parameter_1)